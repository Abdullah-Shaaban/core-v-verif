# Copyright 2023 Dolphin Design
# SPDX-License-Identifier: Apache-2.0 WITH SHL-2.1

# Header
name: cv32e40pv2_benchmarks
description: run available benchmarks

# List of builds
builds:
  clean_fw:
    cmd: make clean-bsp clean_test_programs
    dir: cv32e40p/sim/uvmt
  clean_corev-dv:
    cmd: make clean_riscv-dv clone_riscv-dv
    dir: cv32e40p/sim/uvmt
  uvmt_cv32e40p:
    cmd: make comp comp_corev-dv
    dir: cv32e40p/sim/uvmt
    cfg: pulp_fpu

# ====================================================================================
# List of tests
tests:
  dhrystone:
    build: uvmt_cv32e40p
    description: dhrystone
    dir: cv32e40p/sim/uvmt
    cmd: make test TEST=dhrystone CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  fibonacci:
    build: uvmt_cv32e40p
    description: fibonacci
    dir: cv32e40p/sim/uvmt
    cmd: make test TEST=fibonacci CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  coremark:
    build: uvmt_cv32e40p
    description: coremark
    dir: cv32e40p/sim/uvmt
    cmd: make test TEST=coremark CFG_PLUSARGS="+UVM_TIMEOUT=20000000"
    num: 1

  matmul_32b_float:
    build: uvmt_cv32e40p
    description: matmul_32b_float
    dir: cv32e40p/sim/uvmt
    cmd: make test TEST=matmul_32b_float CFG_PLUSARGS="+UVM_TIMEOUT=2000000"
    num: 1
    skip_sim:
      - pulp
      - pulp_cluster

  matmul_32b_int:
    build: uvmt_cv32e40p
    description: matmul_32b_int
    dir: cv32e40p/sim/uvmt
    cmd: make test TEST=matmul_32b_int CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1
