# Copyright 2023 Dolphin Design
# SPDX-License-Identifier: Apache-2.0 WITH SHL-2.1
#
# YAML file to specify a regression testlist
---
# Header
name: cv32e40p_xpulp_rand_test_regression
description: Random pulp tests for CV32E40P

# List of builds
builds:
  clean_fw:
    cmd: make clean-bsp clean_test_programs
    dir: cv32e40p/sim/uvmt

  clean_corev-dv:
    cmd: make clean_riscv-dv clone_riscv-dv
    dir: cv32e40p/sim/uvmt
    cov: 0

  uvmt_cv32e40p_pulp:
    cmd: make comp comp_corev-dv
    cfg: pulp
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu_1cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_1cyclat
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu_2cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_2cyclat
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu_zfinx:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx_1cyclat
    dir: cv32e40p/sim/uvmt

  uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt

# List of tests
tests:
  corev_rand_pulp_instr_test:
    testname: corev_rand_pulp_instr_test
    description: pulp random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    num: 10

  corev_rand_pulp_hwloop_test:
    testname: corev_rand_pulp_hwloop_test
    description: hwloop random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_test CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    num: 10

  corev_rand_pulp_mac_instr_test:
    testname: corev_rand_pulp_mac_instr_test
    description: pulp mac instr random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_mac_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    num: 5

  corev_rand_pulp_simd_instr_test:
    testname: corev_rand_pulp_simd_instr_test
    description: pulp simd instr random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_simd_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    num: 5

  corev_rand_pulp_instr_ebreak_debug_test:
    testname: corev_rand_pulp_instr_test
    description: pulp rand test with ebreak debug
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    test_cfg: debug_ebreak
    num: 1

  corev_rand_pulp_instr_single_step_debug_test:
    testname: corev_rand_pulp_instr_test
    description: pulp rand test with single-step debug
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    test_cfg: debug_single_step_en
    num: 1

  corev_rand_pulp_instr_interrupt_test:
    testname: corev_rand_pulp_instr_test
    description: pulp instr test with random interrupts
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    test_cfg: gen_rand_int
    num: 2

  corev_rand_pulp_illegal_instr_test:
    testname: corev_rand_pulp_instr_test
    description: pulp instr test with illegal instructions
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=10000000"
    test_cfg: insert_illegal_instr
    num: 2

  corev_rand_pulp_hwloop_debug:
    testname: corev_rand_pulp_hwloop_debug
    description: hwloop debug random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_debug CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    num: 2

  corev_rand_pulp_hwloop_debug_ebreak:
    testname: corev_rand_pulp_hwloop_debug
    description: hwloop ebreak debug random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_debug CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    test_cfg: debug_ebreak
    num: 2

  corev_rand_pulp_hwloop_debug_single_step:
    testname: corev_rand_pulp_hwloop_debug
    description: hwloop single-step debug random test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_debug CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    test_cfg: debug_single_step_en
    num: 2

  corev_rand_pulp_hwloop_interrupt_test:
    testname: corev_rand_pulp_hwloop_test
    description: hwloop test with random interrupts
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_test CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    test_cfg: gen_rand_int
    num: 5

  corev_rand_pulp_hwloop_illegal_instr_test:
    testname: corev_rand_pulp_hwloop_test
    description: hwloop test with illegal instructions
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_test CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    test_cfg: insert_illegal_instr
    num: 2

  corev_rand_pulp_hwloop_exception:
    testname: corev_rand_pulp_hwloop_exception
    description: hwloop exception test
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_exception CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    num: 2

  corev_rand_pulp_hwloop_exception_single_step_debug:
    testname: corev_rand_pulp_hwloop_exception
    description: hwloop exception test with single step debug
    builds:
      - uvmt_cv32e40p_pulp
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_pulp_hwloop_exception CFG_PLUSARGS="+UVM_TIMEOUT=40000000"
    test_cfg: debug_single_step_en
    num: 1

